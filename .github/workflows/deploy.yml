name: Deploy to cPanel

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Sync files to cPanel
      env:
        CPANEL_HOST: ${{ secrets.CPANEL_HOST }}
        CPANEL_USER: ${{ secrets.CPANEL_USER }}
        CPANEL_PASSWORD: ${{ secrets.CPANEL_PASSWORD }}
      run: |
        lftp -u ${{ secrets.CPANEL_USER }},${{ secrets.CPANEL_PASSWORD }} ${{ secrets.CPANEL_HOST }} << EOF
        mirror -R ./public_html /path/to/public_html
        bye
        EOF
